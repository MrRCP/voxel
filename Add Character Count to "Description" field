function add_character_count_script() {
    ?>
    <style>
    .character-count-container {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin-top: -30px;
    }

    .character-count {
        font-weight: bold;
    }

    .character-count.black {
        color: #000;
    }

    .character-count.orange {
        background-color: orange;
        color: #000;
        padding: 3px 5px;
        border-radius: 5px;
        margin-left: 5px;
    }

    .character-count.red {
        background-color: red;
        color: #ffffff;
        padding: 3px 5px;
        border-radius: 5px;
        margin-left: 5px;
    }
    </style>
    <script>
    jQuery(document).ready(function($) {
        var field = $('.field-key-description');
        var container = $('<div>').addClass('character-count-container').insertAfter(field);
        var count = $('<div>').addClass('character-count black').text('0/1000').appendTo(container);

        field.on('input', function() {
            var charCount = $(this).text().length;
            var maxCharCount = 1000;
            count.text(charCount + '/' + maxCharCount);

            if (charCount >= 800 && charCount < maxCharCount) {
                count.removeClass('black red').addClass('orange').text(charCount + '/' + maxCharCount);
            } else if (charCount >= maxCharCount) {
                count.removeClass('black orange').addClass('red').text(charCount + '/' + maxCharCount);
            } else {
                count.removeClass('orange red').addClass('black').text(charCount + '/' + maxCharCount);
            }
        });
    });
    </script>
    <?php
}

add_action('wp_footer', 'add_character_count_script');
